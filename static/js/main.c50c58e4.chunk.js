(this["webpackJsonpre-crud-front"]=this["webpackJsonpre-crud-front"]||[]).push([[0],{24:function(t,e,n){},25:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var c=n(0),s=n.n(c),a=n(16),r=n.n(a),o=(n(24),n(5)),i=n(8),l=n(2),j=(n(25),n(14)),u=n.n(j),b=n(17);var d=function(t,e){var n=Object(c.useState)({data:null,error:null}),s=Object(o.a)(n,2),a=s[0],r=s[1];return Object(c.useEffect)((function(){if(!t)return null;var n=function(){var n=Object(b.a)(u.a.mark((function n(){var c,s;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch(t,e);case 3:return c=n.sent,n.next=6,c.json();case 6:s=n.sent,r({data:s}),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r({error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();n()}),[t]),a},h=s.a.createContext({}),O=n(13),x=n.n(O),m=(n(28),n(1));var p=function(t){var e=t.post,n=Object(c.useContext)(h);return Object(m.jsx)(i.b,{to:"/posts/".concat(e.id),children:Object(m.jsxs)("li",{className:"item",onClick:function(){n.id=e.id,n.content=e.content,n.created=e.created},children:[Object(m.jsx)("header",{children:Object(m.jsxs)("div",{className:"user",children:[Object(m.jsx)("p",{children:"Ivan Petrov"}),Object(m.jsx)("p",{className:"date",children:x()(new Date(e.created),"YYYYMMDDhhmm").fromNow()})]})}),Object(m.jsx)("div",{className:"content",children:e.content})]})})};var f=function(){var t=d("".concat("https://re-crud-backend.herokuapp.com","/posts")),e=t.data,n=t.error;return Object(m.jsxs)("ul",{className:"list",children:[Object(m.jsx)("li",{className:"item item-btn",children:Object(m.jsx)(i.b,{to:"/posts/new",children:Object(m.jsx)("button",{className:"btn",children:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u043e\u0441\u0442"})})}),n&&Object(m.jsx)("li",{className:"error",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a!!!"}),e&&e.map((function(t){return Object(m.jsx)(p,{post:t},t.id)}))]})};var v=function(){var t=Object(c.useState)(""),e=Object(o.a)(t,2),n=e[0],s=e[1],a=Object(c.useState)(!1),r=Object(o.a)(a,2),j=r[0],u=r[1];return Object(m.jsx)("div",{className:"newPost",children:Object(m.jsxs)("div",{className:"newPost__box",children:[Object(m.jsx)(i.b,{to:"/",children:Object(m.jsx)("button",{className:"btn-close",children:"X"})}),Object(m.jsxs)("form",{className:"form",onSubmit:function(t){if(t.preventDefault(),n.trim()){var e={id:0,content:n};try{fetch("".concat("https://re-crud-backend.herokuapp.com","/posts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(t){return t})).then((function(t){s(""),u(!0)})).catch((function(t){return console.log(t)}))}catch(c){console.log(c)}}},children:[Object(m.jsx)("textarea",{className:"textarea",value:n,onChange:function(t){s(t.target.value)}}),Object(m.jsxs)("button",{type:"submit",className:"btn",children:["\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c",j?Object(m.jsx)(l.a,{to:"/"}):null]})]})]})})};var N=function(){var t=Object(c.useContext)(h),e=Object(c.useState)(!1),n=Object(o.a)(e,2),s=n[0],a=n[1],r=Object(c.useState)(!1),i=Object(o.a)(r,2),j=i[0],u=i[1];return Object(m.jsx)("div",{className:"list",children:Object(m.jsxs)("div",{className:"item",children:[Object(m.jsx)("header",{children:Object(m.jsx)("div",{className:"user",children:"MR.Smith"})}),Object(m.jsx)("div",{className:"content",children:t.content}),Object(m.jsxs)("div",{className:"control",children:[Object(m.jsx)("button",{className:"btn",onClick:function(){u(!0)},children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(m.jsx)("button",{className:"btn delete",onClick:function(){try{fetch("".concat("https://re-crud-backend.herokuapp.com","/posts/").concat(t.id),{method:"DELETE"}).then((function(t){return t})).then((function(t){return a(!0)})).catch((function(t){return console.log(t)}))}catch(e){console.log(e)}},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),s?Object(m.jsx)(l.a,{to:"/"}):null,j?Object(m.jsx)(l.a,{to:"/posts/edit"}):null]})]})})};var g=function(){var t=Object(c.useContext)(h),e=Object(c.useState)(t.content),n=Object(o.a)(e,2),s=n[0],a=n[1],r=Object(c.useState)(!1),j=Object(o.a)(r,2),u=j[0],b=j[1];return Object(m.jsx)("div",{className:"newPost",children:Object(m.jsxs)("div",{className:"newPost__box",children:[Object(m.jsxs)("div",{children:["\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442",Object(m.jsx)(i.b,{to:"/posts/".concat(t.id),children:Object(m.jsx)("button",{className:"btn-close",children:"X"})})]}),Object(m.jsxs)("form",{className:"form",onSubmit:function(e){if(e.preventDefault(),s.trim()){var n={id:t.id,content:s};try{fetch("".concat("https://re-crud-backend.herokuapp.com","/posts"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(t){return t})).then((function(t){a(""),b(!0)})).catch((function(t){return console.log(t)}))}catch(c){console.log(c)}}},children:[Object(m.jsx)("textarea",{className:"textarea",value:s,onChange:function(t){a(t.target.value)}}),Object(m.jsxs)("button",{type:"submit",className:"btn",children:["\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",u?Object(m.jsx)(l.a,{to:"/"}):null]})]})]})})};var S=function(){var t=Object(c.useState)({id:null,content:null,created:null}),e=Object(o.a)(t,1)[0];return Object(m.jsx)(h.Provider,{value:e,children:Object(m.jsx)(i.a,{children:Object(m.jsx)("div",{className:"container",children:Object(m.jsxs)(l.d,{children:[Object(m.jsx)(l.b,{path:"/posts/new",component:v}),Object(m.jsx)(l.b,{path:"/posts/edit",component:g}),Object(m.jsx)(l.b,{path:"/posts/:id",component:N}),Object(m.jsx)(l.b,{path:"/",component:f})]})})})})},k=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(e){var n=e.getCLS,c=e.getFID,s=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),c(t),s(t),a(t),r(t)}))};r.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(S,{})}),document.getElementById("root")),k()}},[[38,1,2]]]);
//# sourceMappingURL=main.c50c58e4.chunk.js.map